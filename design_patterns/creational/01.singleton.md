# SINGLETON
**Singleton** is a creational design pattern that lets you ensure that a class has only one instance,  while providing a global access point to this instance.

### Naive Singleton Implementation
```csharp
public sealed class Settings {
    
    public string Theme { get; set; } = "Light";
    public string Language { get; set; } = "English";

    private static Settings _value = null;

    private Settings() {
        // Private constructor to prevent instantiation
    }

    public static Settings Value {
        get {
            if(_value is null) _value = new Settings();
            return _value;
        }
    }
}
```

### Thread-Safe Singleton Implementation
```csharp
public sealed class Settings {

    public string Theme { get; set; } = "Light";
    public string Language { get; set; } = "English";

    private static Settings _value = null;
    private static readonly object _lock = new Object();

    private Settings() {}

    public static Settings Value {
        get {
            if(_value is null){
                lock(_lock){
                    if(_value is null) _value = new Settings();
    
                }
            }
            return _value;
        }
    }
}
```

### Using Lazy<T> for Singleton Implementation
```csharp
public sealed class Settings {

    public string Theme { get; set; } = "Light";
    public string Language { get; set; } = "English";

    private static readonly Lazy<Settings> _value = new Lazy<Settings>(() => new Settings());

    private Settings() {}

    public static Settings Value => _value.Value;

}
```

### Client Code Example
```csharp
class Program {
    public static void Main(string[] args) {
        Settings settings = Settings.Value;
        Console.WriteLine($"Theme: {settings.Theme}, Language: {settings.Language}");

        // Modify settings
        settings.Theme = "Dark";
        settings.Language = "Spanish";

        // Access the singleton instance again
        Settings settings2 = Settings.Value;
        Console.WriteLine($"Theme: {settings2.Theme}, Language: {settings2.Language}");

        // Verify both references point to the same instance
        Console.WriteLine($"Are both instances the same? {ReferenceEquals(settings, settings2)}");
    }
}
```